<!DOCTYPE html>
<html lang="ko-KR">

  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ë¦¬ìŠ¤íŠ¸ ë Œë”ë§</title>
    <link href="/dist/assets/favicon.svg" rel="shortcut icon" />
    <link href="https://spoqa.github.io/spoqa-han-sans/css/SpoqaHanSansNeo.css" rel="stylesheet" />
    <link href="/dist/styles/main.css" rel="stylesheet" />
    <script type="module" src="/dist/scripts/main.js" data-euid="getting-started/list-rendering" defer></script>

    <script src="https://unpkg.com/react/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/prop-types/prop-types.js"></script>
  </head>

  <body>

    <div id="root"></div>

    <script type="text/babel">
      /* ì‹¤ìŠµ ----------------------------------------------------------------------- */

      const weatherList = [
        { id: 'pzkde', content: 'â˜€ï¸ ë§‘ìŒ' },
        { id: 'eodke', content: 'ğŸŒ§ ë¹„' },
        { id: 'waswk', content: 'ğŸŒ§ ëˆˆ' },
        { id: 'wodkr', content: 'â˜ï¸ êµ¬ë¦„' },
        { id: 'kwejv', content: 'ğŸŒ© ì²œë‘¥' },
        { id: 'qkwod', content: 'ğŸŒª íƒœí’' },
      ]

      const shuffle = (list) => {
        const copyedList = [...list]
        let currentIndex = copyedList.length
        let randomIndex
        let tempValue
        // ì…”í”Œ í•  ìš”ì†Œê°€ ë‚¨ì•„ ìˆëŠ” ë™ì•ˆ
        while (0 !== currentIndex) {
          // ëœë¤ ì¸ë±ìŠ¤ ê°’ ìƒì„±
          randomIndex = Math.floor(Math.random() * currentIndex)
          // í˜„ì¬ ì¸ë±ìŠ¤ ì—…ë°ì´íŠ¸
          currentIndex -= 1
          // ë°°ì—´ì˜ í˜„ì¬ ì•„ì´í…œì„ ì„ì‹œë¡œ ì €ì¥
          tempValue = copyedList[currentIndex]
          // ë°°ì—´ì˜ í˜„ì¬ ì•„ì´í…œ ì¸ë±ìŠ¤ì— ëœë¤ ì¸ë±ìŠ¤ ê°’ ì„¤ì •
          copyedList[currentIndex] = copyedList[randomIndex]
          // ë Œë¤ ì¸ë±ìŠ¤ì— ê¸°ì–µëœ ì„ì‹œ ê°’ ì„¤ì •
          copyedList[randomIndex] = tempValue
        }
        return copyedList
      }

      const styles = {
        container: { marginTop: 50, width: 560 },
        list: { listStyle: 'none', paddingLeft: 0 },
        item: { display: 'flex', justifyContent: 'flex-start', alignItems: 'center', padding: 10 },
        label: { marginRight: 10 },
        input: { flex: 1, marginRight: 10, padding: 3 },
        button: { backgroundColor: 'transparent', marginTop: 1, border: 0 }
      }

      const App = () => {

        const [weathers, setWeathers] = React.useState(weatherList)

        React.useEffect(() => {
          const intervalId = window.setInterval(() => setWeathers(shuffle), 1500)
          return () => window.clearInterval(intervalId)
        }, [])

        const getChangeHandler = targetWeather => event => {
          const newContent = event.target.value
          setWeathers(weathers => weathers.map(weather => ({
            ...weather,
            content: weather.id === targetWeather.id ? newContent : weather.content
          })))
        }

        return (
          <div className="weathers" style={styles.container}>
            <div>
              <h2>key ì†ì„±ì´ ì„¤ì •ë˜ì§€ ì•Šì€ ê²½ìš°</h2>
              {
                weathers.map(weather => (
                  <input type="text" value={weather.content} onChange={getChangeHandler(weather)} />
                ))
              }
            </div>
            <div>
              <h2>key ì†ì„±ì´ ë°°ì—´ ì¸ë±ìŠ¤ë¡œ ì„¤ì •ëœ ê²½ìš°</h2>
              {
                weathers.map((weather, index) => (
                  <input key={index} type="text" value={weather.content} onChange={getChangeHandler(weather)} />
                ))
              }
            </div>
            <div>
              <h2>key ì†ì„±ì´ ì•„ì´í…œ IDë¡œ ì„¤ì •ëœ ê²½ìš°</h2>
              {
                weathers.map(weather => (
                  <input key={weather.id} type="text" value={weather.content} onChange={getChangeHandler(weather)} />
                ))
              }
            </div>
          </div>
        )
      }


      ReactDOM.render(<App />, document.getElementById('root'))
    </script>

  </body>

</html>